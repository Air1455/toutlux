{% for label, messages in app.flashes %}
    {% set alertClass = 'info' %}
    {% set icon = 'info-circle' %}

    {% if label == 'success' %}
        {% set alertClass = 'success' %}
        {% set icon = 'check-circle' %}
    {% elseif label == 'error' or label == 'danger' %}
        {% set alertClass = 'danger' %}
        {% set icon = 'exclamation-circle' %}
    {% elseif label == 'warning' %}
        {% set alertClass = 'warning' %}
        {% set icon = 'exclamation-triangle' %}
    {% endif %}

    {% for message in messages %}
        <div class="alert alert-{{ alertClass }} alert-dismissible fade show" role="alert">
            <i class="fas fa-{{ icon }} mr-2"></i>
            {{ message }}
            <button type="button" class="close" data-dismiss="alert" aria-label="Close">
                <span aria-hidden="true">&times;</span>
            </button>
        </div>
    {% endfor %}
{% endfor %}

<script>
    // Auto-dismiss alerts after 5 seconds
    document.addEventListener('DOMContentLoaded', function() {
        setTimeout(function() {
            const alerts = document.querySelectorAll('.alert');
            alerts.forEach(function(alert) {
                if (!alert.classList.contains('alert-danger')) {
                    const closeButton = alert.querySelector('.close');
                    if (closeButton) {
                        closeButton.click();
                    }
                }
            });
        }, 5000);
    });
</script>

<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Compl√©tez votre profil - TOUTLUX</title>
    <style>
        body {
            margin: 0;
            padding: 0;
            font-family: 'Arial', sans-serif;
            background-color: #f4f4f4;
        }
        .email-container {
            max-width: 600px;
            margin: 0 auto;
            background-color: #ffffff;
        }
        .header {
            background: linear-gradient(135deg, #fd7e14 0%, #dc6b0c 100%);
            color: #ffffff;
            padding: 40px 30px;
            text-align: center;
        }
        .progress-container {
            background-color: #ffffff;
            margin: -20px 30px 0;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            text-align: center;
        }
        .progress-bar {
            background-color: #e9ecef;
            height: 20px;
            border-radius: 10px;
            overflow: hidden;
            margin: 10px 0;
        }
        .progress-fill {
            background-color: #fd7e14;
            height: 100%;
            transition: width 0.3s ease;
        }
        .content {
            padding: 40px 30px;
        }
        .completion-steps {
            margin: 30px 0;
        }
        .step {
            display: flex;
            align-items: center;
            margin-bottom: 20px;
            padding: 15px;
            border-radius: 8px;
            background-color: #f8f9fa;
        }
        .step-completed {
            background-color: #d4edda;
        }
        .step-icon {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 15px;
            font-size: 20px;
        }
        .step-completed .step-icon {
            background-color: #28a745;
            color: white;
        }
        .step-pending .step-icon {
            background-color: #e9ecef;
            color: #6c757d;
        }
        .benefits-box {
            background-color: #e7f3ff;
            border-left: 4px solid #007bff;
            padding: 20px;
            margin: 30px 0;
        }
        .button {
            display: inline-block;
            padding: 15px 40px;
            background-color: #fd7e14;
            color: #ffffff;
            text-decoration: none;
            border-radius: 5px;
            font-size: 16px;
            font-weight: bold;
        }
        .trust-score-preview {
            background-color: #fff3cd;
            border: 2px solid #ffc107;
            border-radius: 8px;
            padding: 20px;
            margin: 20px 0;
            text-align: center;
        }
        .footer {
            background-color: #f8f9fa;
            padding: 30px;
            text-align: center;
            color: #666666;
            font-size: 14px;
        }
    </style>
</head>
<body>
<div class="email-container">
    <div class="header">
        <h1>üéØ Plus que {{ 100 - completionPercentage }}% pour compl√©ter votre profil !</h1>
    </div>

    <div class="progress-container">
        <h3 style="margin: 0 0 10px 0; color: #333;">Progression actuelle</h3>
        <div class="progress-bar">
            <div class="progress-fill" style="width: {{ completionPercentage }}%;"></div>
        </div>
        <p style="margin: 10px 0 0 0; font-size: 24px; color: #fd7e14; font-weight: bold;">
            {{ completionPercentage }}% compl√©t√©
        </p>
    </div>

    <div class="content">
        <p>
            Bonjour {{ user.firstName }},
        </p>

        <p>
            Votre profil TOUTLUX est compl√©t√© √† <strong>{{ completionPercentage }}%</strong>.
            Quelques minutes suffisent pour le finaliser et d√©bloquer tous les avantages !
        </p>

        <div class="completion-steps">
            <h3 style="color: #333;">üìã √âtapes √† compl√©ter</h3>

            {% if user.isGeneralInfoComplete %}
                <div class="step step-completed">
                    <div class="step-icon">‚úì</div>
                    <div>
                        <strong>Informations g√©n√©rales</strong><br>
                        <small style="color: #28a745;">Compl√©t√©</small>
                    </div>
                </div>
            {% else %}
                <div class="step step-pending">
                    <div class="step-icon">1</div>
                    <div>
                        <strong>Informations g√©n√©rales</strong><br>
                        <small style="color: #666;">Nom, pr√©nom, date de naissance...</small>
                    </div>
                </div>
            {% endif %}

            {% if user.isLocationComplete %}
                <div class="step step-completed">
                    <div class="step-icon">‚úì</div>
                    <div>
                        <strong>Localisation</strong><br>
                        <small style="color: #28a745;">Compl√©t√©</small>
                    </div>
                </div>
            {% else %}
                <div class="step step-pending">
                    <div class="step-icon">2</div>
                    <div>
                        <strong>Localisation</strong><br>
                        <small style="color: #666;">Adresse, ville, code postal...</small>
                    </div>
                </div>
            {% endif %}

            {% if user.isProfessionalInfoComplete %}
                <div class="step step-completed">
                    <div class="step-icon">‚úì</div>
                    <div>
                        <strong>Informations professionnelles</strong><br>
                        <small style="color: #28a745;">Compl√©t√©</small>
                    </div>
                </div>
            {% else %}
                <div class="step step-pending">
                    <div class="step-icon">3</div>
                    <div>
                        <strong>Informations professionnelles</strong><br>
                        <small style="color: #666;">Profession, employeur...</small>
                    </div>
                </div>
            {% endif %}

            {% if user.isFinancialInfoComplete %}
                <div class="step step-completed">
                    <div class="step-icon">‚úì</div>
                    <div>
                        <strong>Informations financi√®res</strong><br>
                        <small style="color: #28a745;">Compl√©t√©</small>
                    </div>
                </div>
            {% else %}
                <div class="step step-pending">
                    <div class="step-icon">4</div>
                    <div>
                        <strong>Informations financi√®res</strong><br>
                        <small style="color: #666;">Revenus mensuels (confidentiel)</small>
                    </div>
                </div>
            {% endif %}
        </div>

        <div class="trust-score-preview">
            <h3 style="margin: 0 0 10px 0; color: #856404;">üåü Votre score de confiance actuel</h3>
            <div style="font-size: 24px; color: #ffc107;">
                {% for i in 1..5 %}
                    {% if i <= user.trustScore %}
                        ‚òÖ
                    {% else %}
                        ‚òÜ
                    {% endif %}
                {% endfor %}
            </div>
            <p style="margin: 10px 0 0 0; color: #666;">
                En compl√©tant votre profil, vous pourriez atteindre
                <strong>{{ potentialScore }}/5</strong> ‚≠ê
            </p>
        </div>

        <div class="benefits-box">
            <h3 style="margin-top: 0; color: #084298;">üéÅ Avantages d'un profil complet</h3>
            <ul style="margin: 10px 0; padding-left: 20px;">
                <li><strong>3x plus de visibilit√©</strong> sur vos annonces</li>
                <li><strong>Acc√®s prioritaire</strong> aux nouvelles propri√©t√©s</li>
                <li><strong>Badge "Profil v√©rifi√©"</strong> sur votre compte</li>
                <li><strong>Messages prioritaires</strong> dans les bo√Ætes de r√©ception</li>
                <li><strong>Statistiques d√©taill√©es</strong> sur vos annonces</li>
            </ul>
        </div>

        <div style="text-align: center; margin: 40px 0;">
            <a href="{{ url('app_profile_edit') }}" class="button">
                Compl√©ter mon profil maintenant
            </a>
            <p style="margin: 15px 0 0 0; color: #666; font-size: 14px;">
                ‚è±Ô∏è Temps estim√© : {{ estimatedTime }} minutes
            </p>
        </div>

        {% if incentive %}
            <div style="background-color: #d4edda; border: 1px solid #28a745; border-radius: 8px; padding: 15px; margin: 20px 0; text-align: center;">
                <strong style="color: #155724;">üéâ Offre sp√©ciale !</strong><br>
                Compl√©tez votre profil aujourd'hui et recevez <strong>{{ incentive }}</strong>
            </div>
        {% endif %}

        <p style="color: #666; font-size: 14px;">
            <strong>üí° Le saviez-vous ?</strong><br>
            Les utilisateurs avec un profil complet re√ßoivent en moyenne 5x plus de r√©ponses
            √† leurs messages et vendent leurs biens 40% plus rapidement.
        </p>

        <hr style="border: none; border-top: 1px solid #e0e0e0; margin: 30px 0;">

        <p style="color: #999; font-size: 14px; text-align: center;">
            Nous prenons la protection de vos donn√©es tr√®s au s√©rieux. Toutes les informations
            sont stock√©es de mani√®re s√©curis√©e et ne sont jamais partag√©es sans votre consentement.
        </p>
    </div>

    <div class="footer">
        <p>
            <strong>Besoin d'aide ?</strong><br>
            Notre √©quipe est l√† pour vous accompagner :
            <a href="mailto:support@toutlux.com" style="color: #fd7e14;">support@toutlux.com</a>
        </p>

        <p style="margin-top: 20px;">
            ¬© {{ 'now'|date('Y') }} TOUTLUX - Tous droits r√©serv√©s<br>
            <a href="{{ url('app_privacy') }}" style="color: #666666;">Politique de confidentialit√©</a> |
            <a href="{{ url('app_terms') }}" style="color: #666666;">Conditions d'utilisation</a>
        </p>

        <p style="font-size: 12px; color: #999; margin-top: 20px;">
            Vous recevez cet email car votre profil TOUTLUX n'est pas complet.<br>
            Pour ne plus recevoir ces rappels,
            <a href="{{ url('app_unsubscribe', {'token': unsubscribeToken, 'type': 'reminders'}) }}" style="color: #666666;">
                cliquez ici
            </a>.
        </p>
    </div>
</div>
</body>
</html>
